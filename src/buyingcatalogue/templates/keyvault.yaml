{{- if .Values.keyVault.enabled -}}
apiVersion: spv.no/v1alpha1
kind: AzureKeyVaultSecret
metadata:
  name: isapi-cert 
spec:
  vault:
    name: {{ .Values.keyVault.name }} # name of key vault
    object:
      name: {{ .Values.keyVault.isapiCertificateSecretName }}
      type: certificate
  output: 
    secret:
      name: isapi-cert        # kubernetes secret name
      type: kubernetes.io/tls # kubernetes secret type
{{- else -}}
apiVersion: v1
data:
 tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURwakNDQW82Z0F3SUJBZ0lKQUlEUjhFcE44N3FFTUEwR0NTcUdTSWIzRFFFQkN3VUFNR2d4Q3pBSkJnTlYKQkFZVEFsTk5NUTB3Q3dZRFZRUUlEQVJPUlVsT01Rc3dDUVlEVlFRSERBSlBTekVRTUE0R0ExVUVDZ3dIVjBoQgpSRVJWVURFTE1Ba0dBMVVFQ3d3Q1Qwc3hDekFKQmdOVkJBTU1BazlMTVJFd0R3WUpLb1pJaHZjTkFRa0JGZ0pQClN6QWVGdzB5TURBMU1qRXhOVEkzTlRWYUZ3MHlNVEExTWpFeE5USTNOVFZhTUdneEN6QUpCZ05WQkFZVEFsTk4KTVEwd0N3WURWUVFJREFST1JVbE9NUXN3Q1FZRFZRUUhEQUpQU3pFUU1BNEdBMVVFQ2d3SFYwaEJSRVJWVURFTApNQWtHQTFVRUN3d0NUMHN4Q3pBSkJnTlZCQU1NQWs5TE1SRXdEd1lKS29aSWh2Y05BUWtCRmdKUFN6Q0NBU0l3CkRRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFLcnRHM1MwNUtFUFdlV3BzUzRLbkQ3VVFZb0QKMCtWNndnQStPcERwbmVLeHZpaklqMVVaUXJqRk9wdGFWajArOThRcVR1L21sRFliTzFEM2daK3E0b2FzRTl0QQpIWFBKRWVmc1hEUGpkdFA5NTd1YWIrbnFtOEdYdnlOWGtRMGtxSGZrMkxvOWhueUo1c0FhTHdYUEk4ZDE1SUdEClRhZTNJMm05dWRnTGh2WmsvZDhYNHYxK2tsRXYxY1BTNERVZTA2RlFpM25MUGVzdm02QWQvMzQ1Y3RtUllQVXQKMTFMQmorYnd2cGxyYTVIZnVjN2VzTnFJN1BRbHcwNFE5akRYanlnOXlpZ1RCN0pBc3hrSVFPbkN3eFRMejJ3Rwo0cnplWUtkWnBxbGc3WHZOTnZYbExBLzdjcjR6NXlTWVVNckMzSlY0Mk5FVC9leTFvcjhvY1VlTFRCa0NBd0VBCkFhTlRNRkV3SFFZRFZSME9CQllFRkZPbW1qdkpBOVF5cE54dXRCZXVEbXZRcitwdk1COEdBMVVkSXdRWU1CYUEKRkZPbW1qdkpBOVF5cE54dXRCZXVEbXZRcitwdk1BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTgpBUUVMQlFBRGdnRUJBQlJuS0ozOVZwN3crUVhqZk5XSXFOYjJuSHN1SkNGK3hVdUJucncyd2U1cnpWdE1nM01hCnZEdmZxYmdDekN4Y2hCaDF6ZWJyeDFKd0hhaVZ2dTN0a29NWUR2d3ZoU2xsSU1kdHNUY0lheXBUeDE3R3VnNUcKMDQ1VHVWNzVBY0RKdG5mdDJRVGlreGVmNGc3SklPMDRzcEhiV3ArSTBWcTV3cCtPRDJlZEZTZHJRcVZUSzdvegpSa3dRZXZnWlZMUmkyVGZIeXN1TU1ZVU1tZ0xHNStkR005Z3VPdkpONnhaZXM1MjZYQ05mZkd0Tm45NUlBSUw3CmZpeEtLMVFoSlFjVVozV3AwVVVFZUFoOUhBRXJQaERYVVNIbUZmS1JxUWNFZytrWGFoa3kxbXQ0SHpuWTcyRlQKZmFvYm1BelN1RldrU0xnM0ViUVVoWk9VMFhlRGhWbDc2L3M9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
 tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBcXUwYmRMVGtvUTlaNWFteExncWNQdFJCaWdQVDVYckNBRDQ2a09tZDRyRytLTWlQClZSbEN1TVU2bTFwV1BUNzN4Q3BPNythVU5oczdVUGVCbjZyaWhxd1QyMEFkYzhrUjUreGNNK04yMC8zbnU1cHYKNmVxYndaZS9JMWVSRFNTb2QrVFl1ajJHZklubXdCb3ZCYzhqeDNYa2dZTk5wN2NqYWIyNTJBdUc5bVQ5M3hmaQovWDZTVVMvVnc5TGdOUjdUb1ZDTGVjczk2eStib0IzL2ZqbHkyWkZnOVMzWFVzR1A1dkMrbVd0cmtkKzV6dDZ3CjJvanM5Q1hEVGhEMk1OZVBLRDNLS0JNSHNrQ3pHUWhBNmNMREZNdlBiQWJpdk41Z3AxbW1xV0R0ZTgwMjllVXMKRC90eXZqUG5KSmhReXNMY2xYalkwUlA5N0xXaXZ5aHhSNHRNR1FJREFRQUJBb0lCQVFDUW1rK2tDSFZ6bkowZApJdFoyY1J1R08rUEdjejZNNGJIR3F0NjVRaXNFWWdMU1ZmcU1yL1kyZ3dUMThSTU1kWHovUkJ2TDhYSnA0OWZtCnc3Mng2c3dCeXdweGJtaDhVQnNKN25pQ25Xa21KNlFvbnBzWGRoZVhURjJ6OUowT1ZYa0JGV1lWQ1lBQlZGa1gKSkErc0JuWHFoTjV3Z3pqckxwQ1RJS05kRjBOeXB0TlNCMXpDak5waURHVUxvOStDS2ZJSWw2ZmxZUndva2Q0WgozaXBnNnBvc2FQdVo1TFoyNVJuU1RnOUQ2djJmYkVUdXprMk5OTHRCcDFKcmZ2dUFPbjdLdTFwMkl1ZWMyWkdlCmJibmQzMkVrV2RRTDBYbzFrRXgyYXo5QkVoTmJoS2V5azEzTWxxakJHaVZpcTZGRzBSVyt3d3dsRitRSllSR2UKVUxkS1dMaEJBb0dCQU42S1M3SGE2dWtQcE56eG1uUnZqZzY1eTdCY09pWXVrWVlaU3BpMDNSMTZqSm9zTjFGUgpqb1BiTit2SXFRUXhaZVR4aWk0RVpDa3pIZ1RXdEYxZG9LOEdBY3YzZ0puUys4OC96dFZGeTZZaTVicHR1cGxjCnB4Ly80TWlpS2RsUk5XcWIyUnpVV0xBaVhGV0NOSHBJajVKeG94SkpVWW5CdWpCZHNLblI5N090QW9HQkFNU2cKS0ZiODVIV0hlUE5Id04vZ29teTRvdm9MNHlBVHVoSWw1aGRSZmVWaEVwZGhTMmZkYlVJZ1FwaDdJRlNaNHpibgpHcEpvZ0NYRzVEcEZIb3VrU3kxMVI2anQ5MVlSRG1uT0NQbUZtS3F0aktjaHNqb0RsTy9XNGpVTmxMSlVDWnUrCm9sSi9ZTlo3aTNKQWFDUTNHQm03cytQSTRhU1J5MlVWK1ZVVnBlZWRBb0dBUHZxZWIyZ0lBUXNYV2h2WjNVZlEKeVNRVm5BU054RTU3aXByUHZLVzZ5ZVBydEpuODBidWwvSFRtdjRpYkpIK2lXWWR0MXBZUmpvTlQ1SVNxcUoyZApvc3F0YVg3UzJ6V1ZZOUtvQXoxc1k4a09nSk1iTXRuQXhsS1ExOWJreHdhdmVrcyt4MlRrOEh2WTY2NGNrZHJGCkh1bWYvOFhXR0lsRjJ2ZzR6ZWFKRmtVQ2dZQWJKdXFyS0h6NzVkdEQ3UktyVjcvV042RDUybzVnclppeVROMTcKTnR1bHcwUG45NTJNR0Qyd05mZzhTalJxdWwxd0JYWGI1ZVpjVVJ6UEZ5Qml0Q3RWZWE2Tm0xN2VXYmlkejcvWgpoU05SM21sZjR2MVRtWThGbDZ6aEdxRUFCeTdVZlB5NVc3R3ByS0hUQXlYZWFtVS9tSFg4N0k2TVJUM0xGYis2CmlpVEEyUUtCZ0dtVzNqMVByZ2g1N3l0SGxhU1NhSitxcEUzc1pZa0EvY1pLNGp1clBnRkxzUy9YT2pvYmVvZTIKbGIvNGhlRmlYQ3pUQmhMNGNPSS9URU1kWWNjbkRUdW9ob28ydkpEd05TZHhTUG8zZnlhdTVaVHRoVGxxSmkycgo5QzFQTitsNTlmZ3ZvOWFpYlVZQUh6SzJwZXZiQmNxSmNKMktGb3B0V3pjTEY4NGpwa3RWCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
kind: Secret
metadata:
 name: isapi-cert
type: Opaque
{{- end }}